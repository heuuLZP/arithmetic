<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>位置匹配 | 前端知识体系</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="将零碎知识归纳、整合成完成的框架体系">
    <link rel="preload" href="/blog/assets/css/0.styles.56a09861.css" as="style"><link rel="preload" href="/blog/assets/js/app.f4901509.js" as="script"><link rel="preload" href="/blog/assets/js/2.99ef9197.js" as="script"><link rel="preload" href="/blog/assets/js/9.d0a06bb1.js" as="script"><link rel="prefetch" href="/blog/assets/js/3.2b816402.js"><link rel="prefetch" href="/blog/assets/js/4.4b11c13d.js"><link rel="prefetch" href="/blog/assets/js/5.3f2aee8f.js"><link rel="prefetch" href="/blog/assets/js/6.d26178e5.js"><link rel="prefetch" href="/blog/assets/js/7.547ed3af.js"><link rel="prefetch" href="/blog/assets/js/8.4c228223.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.56a09861.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/RegExp/" class="nav-link router-link-active">
  正则表达式
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/RegExp/" class="nav-link router-link-active">
  正则表达式
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/RegExp/" aria-current="page" class="sidebar-link">学习笔记</a></li><li><a href="/blog/RegExp/first.html" class="sidebar-link">第一章：字符匹配</a></li><li><a href="/blog/RegExp/first_practise.html" class="sidebar-link">第一章练习册</a></li><li><a href="/blog/RegExp/second.html" aria-current="page" class="active sidebar-link">第二章：位置匹配</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/RegExp/second.html#一、-和" class="sidebar-link">一、^ 和 $</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/second.html#二、-b-和-b" class="sidebar-link">二、\b 和 \B</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/second.html#三、-p-和-p" class="sidebar-link">三、(?=p) 和 (?!p)</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/second.html#四、位置的特性" class="sidebar-link">四、位置的特性</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/second.html#五、数字的千位分隔符表示法" class="sidebar-link">五、数字的千位分隔符表示法</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="位置匹配"><a href="#位置匹配" class="header-anchor">#</a> 位置匹配</h1> <table><thead><tr><th>锚</th> <th>位置</th></tr></thead> <tbody><tr><td><code>^</code></td> <td>开头，多行的每一行开头</td></tr> <tr><td><code>$</code></td> <td>结尾，多行的每一行结尾</td></tr> <tr><td><code>\b</code></td> <td>单词边界：[_0-9a-zA-Z] 和 非 [_0-9a-zA-Z] 之间的位置</td></tr> <tr><td><code>\B</code></td> <td>排除 \b 匹配的位置后剩下的位置</td></tr> <tr><td><code>(?=p)</code></td> <td>正向先行断言：p 前面的位置</td></tr> <tr><td><code>(?!p)</code></td> <td>负向先行断言：不是 p 前面的位置</td></tr></tbody></table> <h2 id="一、-和"><a href="#一、-和" class="header-anchor">#</a> 一、<code>^</code> 和 <code>$</code></h2> <p><code>^</code> 在正则表达式中有两种用法：</p> <ul><li>字符组中使用<br>
表示排除某些字符</li> <li>非字符组中使用<br>
表示位置匹配</li></ul> <h2 id="二、-b-和-b"><a href="#二、-b-和-b" class="header-anchor">#</a> 二、<code>\b</code> 和 <code>\B</code></h2> <p>谨慎使用 <code>\b</code> 和 <code>\B</code>，通常字符串中会匹配到多个单词边界。</p> <h2 id="三、-p-和-p"><a href="#三、-p-和-p" class="header-anchor">#</a> 三、<code>(?=p)</code> 和 <code>(?!p)</code></h2> <p>这里的问题是，每次看完先行断言的知识点，很快就忘记了。
建议通过一些例子来熟悉先行断言的用法。</p> <h2 id="四、位置的特性"><a href="#四、位置的特性" class="header-anchor">#</a> 四、位置的特性</h2> <p>可以把位置理解成空字符 <code>&quot;&quot;</code></p> <p><strong>注意</strong>：
是空字符，不是空格，两者的含义是不一样的。</p> <h2 id="五、数字的千位分隔符表示法"><a href="#五、数字的千位分隔符表示法" class="header-anchor">#</a> 五、数字的千位分隔符表示法</h2> <p>把 &quot;12345678&quot;, 变成&quot;12,345,678&quot;</p> <h4 id="_5-1-最后一个逗号"><a href="#_5-1-最后一个逗号" class="header-anchor">#</a> 5.1 最后一个逗号</h4> <p>找出最后一个逗号的位置：</p> <p>最后一个逗号的位置，后面应该是3个数字，最后是末尾。</p> <p>即：子模式应该是 <code>\d{3}$</code></p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;12345678&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regex <span class="token operator">=</span> <span class="token regex">/(?=\d{3}$)/g</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;12345,678&quot;</span>
</code></pre></div><h4 id="_5-2-找出剩下的逗号"><a href="#_5-2-找出剩下的逗号" class="header-anchor">#</a> 5.2 找出剩下的逗号</h4> <p>最后一个逗号的位置：后面应该是3个数字，最后是末尾。</p> <p>可以用最笨的方式找规律：
倒数第二个逗号的位置：后面应该是6个数字，最后是末尾。
倒数第三个逗号的位置：后面应该是9个数字，最后是末尾。</p> <p>可以发现通用的规律是：
每个逗号的位置：后面应该是 <code>n * 3</code> 个数字，最后是末尾。</p> <p>因为 <code>n &gt;= 1</code>, 所以可以使用量词 <code>+</code></p> <p>即：<code>(\d{3})+$</code></p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;12345678&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regex <span class="token operator">=</span> <span class="token regex">/(?=(\d{3})+$)/g</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;12,345,678&quot;</span>
</code></pre></div><p><strong>附加说明</strong></p> <p>一个疑惑：逗号是怎么添加到字符串当中的，replace() 方法是怎么添加逗号的？(js 基础有待加强😭)</p> <ul><li>猜想1：<s>找到所有的位置之后，再添加逗号</s>❌</li> <li>猜想2：找到一个位置，添加逗号，在此基础上继续找下一个逗号❓</li></ul> <p>这里猜想2是有歧义的：</p> <ul><li>理解方式1：<s>针对原字符串，根据正则找到一个位置，在原字符串中添加逗号，然后针对原字符串继续找下一个逗号</s>❌</li> <li>理解方式2：针对原字符串，根据正则找到一个位置，在新字符串中添加逗号，然后针对原字符串继续找下一个逗号</li></ul> <p>理解方式1是错误的，因为 <code>replace()</code> 方法是不会改变原字符串的。</p> <p>所有的逗号都是在新的字符串上面添加，而根据正则表达式找位置，是针对于原字符串的，这点一定要想清楚。</p> <p>完整的描述是：</p> <p>针对原字符串，倒数第二个逗号的位置：后面应该是6个数字，最后是末尾。</p> <h4 id="_5-3-边界处理"><a href="#_5-3-边界处理" class="header-anchor">#</a> 5.3 边界处理</h4> <p>刚才是从后往前找，但是这里有个容易被忽略的限制条件：</p> <p><strong>逗号的位置不能是开头</strong></p> <p>🍬 没考虑边界时</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;123456789&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regex <span class="token operator">=</span> <span class="token regex">/(?=(\d{3})+$)/g</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;,123,456,789&quot;</span>
</code></pre></div><p>这里就用到了负向先行断言</p> <p><code>(?=^)</code> 子模式是开头，匹配的就是开头前面的位置，但实际上可以认为就是开头，因为<code>开头</code>和<code>开头前面的位置</code> 代表的是同一个位置，想想位置的特性，2个空字符和1个空字符实际上所占得空间是一样的。</p> <p>因为<code>(?=^)</code>匹配的是开头，那么<code>(?!^)</code>就代表不是开头的位置</p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;123456789&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regex <span class="token operator">=</span> <span class="token regex">/(?!^)(?=(\d{3})+$)/g</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;123,456,789&quot;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/RegExp/first_practise.html" class="prev">
        第一章练习册
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.f4901509.js" defer></script><script src="/blog/assets/js/2.99ef9197.js" defer></script><script src="/blog/assets/js/9.d0a06bb1.js" defer></script>
  </body>
</html>
