<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>字符匹配对应的练习题 | 前端知识体系</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="将零碎知识归纳、整合成完成的框架体系">
    <link rel="preload" href="/blog/assets/css/0.styles.56a09861.css" as="style"><link rel="preload" href="/blog/assets/js/app.fdc539b0.js" as="script"><link rel="preload" href="/blog/assets/js/2.cac4d5cd.js" as="script"><link rel="preload" href="/blog/assets/js/10.57fdffcf.js" as="script"><link rel="prefetch" href="/blog/assets/js/11.0a89e37b.js"><link rel="prefetch" href="/blog/assets/js/12.db7593e2.js"><link rel="prefetch" href="/blog/assets/js/13.f2703623.js"><link rel="prefetch" href="/blog/assets/js/3.a85a84b0.js"><link rel="prefetch" href="/blog/assets/js/4.5cd91dd8.js"><link rel="prefetch" href="/blog/assets/js/5.bfe99bc9.js"><link rel="prefetch" href="/blog/assets/js/6.6d08fd81.js"><link rel="prefetch" href="/blog/assets/js/7.6e1e3032.js"><link rel="prefetch" href="/blog/assets/js/8.ab57fdf6.js"><link rel="prefetch" href="/blog/assets/js/9.ae543aac.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.56a09861.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/RegExp/" class="nav-link router-link-active">
  正则表达式
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/RegExp/" class="nav-link router-link-active">
  正则表达式
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/RegExp/" aria-current="page" class="sidebar-link">学习笔记</a></li><li><a href="/blog/RegExp/first.html" class="sidebar-link">第一章：字符匹配</a></li><li><a href="/blog/RegExp/first_practise.html" aria-current="page" class="active sidebar-link">第一章练习册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/RegExp/first_practise.html#一、16-进制颜色值" class="sidebar-link">一、16 进制颜色值</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/first_practise.html#二、匹配时间" class="sidebar-link">二、匹配时间</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/first_practise.html#三、匹配日期" class="sidebar-link">三、匹配日期</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/first_practise.html#四、匹配id" class="sidebar-link">四、匹配id</a></li></ul></li><li><a href="/blog/RegExp/second.html" class="sidebar-link">第二章：位置匹配</a></li><li><a href="/blog/RegExp/second_practise.html" class="sidebar-link">第二章练习册</a></li><li><a href="/blog/RegExp/third.html" class="sidebar-link">第三章：括号的作用</a></li><li><a href="/blog/RegExp/third_practise.html" class="sidebar-link">第三章练习册</a></li><li><a href="/blog/RegExp/fourthly.html" class="sidebar-link">第四章：回朔法原理</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="字符匹配对应的练习题"><a href="#字符匹配对应的练习题" class="header-anchor">#</a> 字符匹配对应的练习题</h1> <p>正则类的问题可以拆解成固定的套路：<code>纵向模糊匹配</code> + <code>横向模糊匹配</code>。</p> <p>对应到具体知识点就是：<code>元字符</code>、<code>字符组</code>、<code>量词</code>、<code>分支结构</code>。</p> <h2 id="一、16-进制颜色值"><a href="#一、16-进制颜色值" class="header-anchor">#</a> 一、16 进制颜色值</h2> <p>给定字符串(以下字符串中不一定都是正确的十六进制)</p> <div class="language- extra-class"><pre class="language-text"><code>#ffbbad #f1234 #Fc01DF #FFF #ffE
</code></pre></div><p>要求匹配正确的十六进制颜色值。</p> <p>分析：</p> <p>1.起始字符是<code>#</code><br>
2.十六进制的字符范围是 <code>0-9</code>, <code>a-f</code>, <code>A-F</code><br>
根据纵向模糊匹配，可以使用字符组： <code>[0-9a-fA-F]</code>
3.字符只能是 <code>3</code> 位或者 <code>6</code> 位
根据横向模糊匹配，可以使用量词和分支结构</p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(#[0-9a-fA-F]{6})|((#[0-9a-fA-F]{3})\s)|(#[0-9a-fA-F]{3}$)/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;#ffbbad #f1234 #Fc01DF #FFF #ffE&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;#ffbbad&quot;, &quot;#Fc01DF&quot;, &quot;#FFF &quot;, &quot;#ffE&quot;]</span>
</code></pre></div><p><strong>勘误</strong></p> <p>书中给出的正则表达式是 <code>/#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})/g</code>，这个是不够准确的，因为当字符串中含有不正确的十六进制时，就会匹配到意外的情况。</p> <p>比如 <code>#f1234</code> ，因为只有5位，所以这是个错误的十六进制颜色值，但是用书中的正则表达式会匹配出来 <code>#f12</code>, 这是不符合期望的。</p> <p>为什么会匹配出来 <code>#f12</code>?<br>
答：因为分支结构是惰性的，所以优先匹配出现6次的字符<code>[0-9a-fA-F]{6}</code>，<code>#f1234</code> 中除了 <code>#</code> 只有5个字符，所以不满足规则，继续匹配出现3次的字符<code>[0-9a-fA-F]{3}</code>，<code>#f1234</code> 中具有满足此规则的字符串<code>#f12</code>，所以就匹配到了。</p> <p><strong>优化</strong></p> <p>我的正则中使用了 <code>\s</code> 和 <code>$</code> 这两个元字符：</p> <ul><li><code>(#[0-9a-fA-F]{3})\s</code>
在后面加上 <code>\s</code> 的作用就是，确保3位的16进制颜色值后面必须是一个空格，这样就能避免把4位或者5位，截断成3位。</li> <li><code>(#[0-9a-fA-F]{3})$</code>
在后面加上 <code>$</code> 的作用就是，确保3位的16进制颜色值后面是字符串的结尾，避免遗漏最后一个匹配结果。</li></ul> <h2 id="二、匹配时间"><a href="#二、匹配时间" class="header-anchor">#</a> 二、匹配时间</h2> <p>以 24 小时制为例。</p> <p>要求匹配：</p> <div class="language- extra-class"><pre class="language-text"><code>23:59
02:07
</code></pre></div><p>分析：</p> <p>1.数字的范围是<code>0-9</code>
2.第一位只能是<code>0</code>、<code>1</code>、<code>2</code>
3.第二位依赖于第一位的选择：</p> <ul><li>[0][0-9]</li> <li>[1][0-9]</li> <li>[2][0-3]</li></ul> <p>汇总为 [01][0-9]|[2][0-3]</p> <p>4.第三位[0-5]
5.第四位[0-9]</p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^([01][0-9]|[2][0-3]):[0-5][0-9]$/</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;23:59&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;02:07&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; true</span>
<span class="token comment">// =&gt; true</span>
</code></pre></div><p>如果也要求匹配 &quot;7:9&quot;, 也就是说时分前面的 &quot;0&quot; 可以忽略。</p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^([2][0-3]|1[0-9]|0?[0-9]):([1-5][0-9]|0?[0-9])$/</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;23:59&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;02:07&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;7:9&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; true</span>
<span class="token comment">// =&gt; true</span>
<span class="token comment">// =&gt; true</span>
</code></pre></div><h2 id="三、匹配日期"><a href="#三、匹配日期" class="header-anchor">#</a> 三、匹配日期</h2> <p>以 <code>yyyy-mm-dd</code> 格式为例。</p> <p>要求匹配:</p> <div class="language- extra-class"><pre class="language-text"><code>2017-06-10
</code></pre></div><p>分析：
1.年 [0-9]{4}
但实际上 1970 之前的年份用的场景比较少，这里就只考虑 1970 以及之后的年份。</p> <p>[1][9][7-9][0-9]|[2-9][0-9]{3}</p> <p>2.月：01-12
[0][1-9]|[1][0-2]</p> <p>3.天：每个月的天数是不一样的</p> <p>[0][1-9]|[12][0-9]|[3][01]</p> <p>这个其实还是不够准确的，因为每个月天数不一样，后续会补充一个更完整的。</p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;2017-06-10&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; true</span>
</code></pre></div><h2 id="四、匹配id"><a href="#四、匹配id" class="header-anchor">#</a> 四、匹配id</h2> <p>要求从</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>提取出 <code>id=&quot;container&quot;</code></p> <p>分析：</p> <p>1.整体可以看成是id=&quot;x&quot;，其中只有 x 是变量，所以进一步分析 x<br>
2.id 的值</p> <ul><li>id 的值不得包含空白字符（whitespace，包括空格和制表符等）</li> <li>使用除 ASCII 字母、数字、_、- 和 . 以外的字符可能会造成兼容性问题，因为 HTML 4 中不允许使用它们。虽然这个限制在 HTML5 中被解除了，但为兼容性考虑 ID 应该以字母开头。</li></ul> <p>通过上述描述可以发现，x 推荐的值是 <code>ASCII 字母</code>、<code>数字</code>、<code>_</code>、<code>-</code> 和 <code>.</code>组合而成的</p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/id=&quot;([-_a-zA-Z0-9\.])*&quot;/</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'&lt;div id=&quot;container&quot; class=&quot;main&quot;&gt;&lt;/div&gt;'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; id=&quot;container&quot;</span>
</code></pre></div><p>但是一般id 的值可以用 <code>.</code> 来匹配，因为可以默认id的值是正确的。</p> <p>注意：<code>*</code> 是贪婪匹配，<code>.</code> 可以匹配到 <code>&quot;</code>，所以会把 class 也匹配进来，只要变成惰性模式就行了</p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/id=&quot;.*?&quot;/</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'&lt;div id=&quot;container&quot; class=&quot;main&quot;&gt;&lt;/div&gt;'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; id=&quot;container&quot;</span>
</code></pre></div><p>另外一种方法，使用脱字符<code>^</code>,把 <code>&quot;</code> 排除</p> <p>🍬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/id=&quot;[^&quot;]*&quot;/</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'&lt;div id=&quot;container&quot; class=&quot;main&quot;&gt;&lt;/div&gt;'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; id=&quot;container&quot;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/RegExp/first.html" class="prev">
        第一章：字符匹配
      </a></span> <span class="next"><a href="/blog/RegExp/second.html">
        第二章：位置匹配
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.fdc539b0.js" defer></script><script src="/blog/assets/js/2.cac4d5cd.js" defer></script><script src="/blog/assets/js/10.57fdffcf.js" defer></script>
  </body>
</html>
