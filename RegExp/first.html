<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>字符匹配 | 前端知识体系</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="将零碎知识归纳、整合成完成的框架体系">
    <link rel="preload" href="/blog/assets/css/0.styles.56a09861.css" as="style"><link rel="preload" href="/blog/assets/js/app.eda0559f.js" as="script"><link rel="preload" href="/blog/assets/js/2.7cc74fb0.js" as="script"><link rel="preload" href="/blog/assets/js/5.b91030ac.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.88db621d.js"><link rel="prefetch" href="/blog/assets/js/3.e3420f47.js"><link rel="prefetch" href="/blog/assets/js/4.76e6ca2b.js"><link rel="prefetch" href="/blog/assets/js/6.ecf3f633.js"><link rel="prefetch" href="/blog/assets/js/7.a5a2f4c4.js"><link rel="prefetch" href="/blog/assets/js/8.a9b46bc1.js"><link rel="prefetch" href="/blog/assets/js/9.51405078.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.56a09861.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/RegExp/" class="nav-link router-link-active">
  正则表达式
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/RegExp/" class="nav-link router-link-active">
  正则表达式
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/RegExp/" aria-current="page" class="sidebar-link">学习笔记</a></li><li><a href="/blog/RegExp/first.html" aria-current="page" class="active sidebar-link">第一章：字符匹配</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/RegExp/first.html#_1-1-横向模糊匹配" class="sidebar-link">1-1.横向模糊匹配</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/first.html#_1-2-纵向匹配" class="sidebar-link">1-2.纵向匹配</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/first.html#_1-3-量词" class="sidebar-link">1-3.量词</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/first.html#_1-4-贪婪匹配" class="sidebar-link">1-4.贪婪匹配</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/first.html#_1-5-惰性匹配" class="sidebar-link">1-5.惰性匹配</a></li><li class="sidebar-sub-header"><a href="/blog/RegExp/first.html#_1-6-多选分支" class="sidebar-link">1-6.多选分支</a></li></ul></li><li><a href="/blog/RegExp/first_practise.html" class="sidebar-link">第一章练习册</a></li><li><a href="/blog/RegExp/second.html" class="sidebar-link">第二章：位置匹配</a></li><li><a href="/blog/RegExp/second_practise.html" class="sidebar-link">第二章练习册</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="字符匹配"><a href="#字符匹配" class="header-anchor">#</a> 字符匹配</h1> <h2 id="_1-1-横向模糊匹配"><a href="#_1-1-横向模糊匹配" class="header-anchor">#</a> 1-1.横向模糊匹配</h2> <blockquote><p>匹配不同长度的字符。</p></blockquote> <ul><li>量词</li></ul> <h2 id="_1-2-纵向匹配"><a href="#_1-2-纵向匹配" class="header-anchor">#</a> 1-2.纵向匹配</h2> <blockquote><p>匹配不同的字符。</p></blockquote> <ul><li>元字符</li> <li>字符组</li></ul> <h2 id="_1-3-量词"><a href="#_1-3-量词" class="header-anchor">#</a> 1-3.量词</h2> <blockquote><p>{m,n} 最少出现 m 次，最多出现 n 次。</p></blockquote> <h2 id="_1-4-贪婪匹配"><a href="#_1-4-贪婪匹配" class="header-anchor">#</a> 1-4.贪婪匹配</h2> <blockquote><p>尽可能匹配符合规则的出现次数最多字符</p></blockquote> <p>部分量词是贪婪匹配的，比如：</p> <ul><li>{m, n} 注意 <code>m &lt; n</code></li> <li>{m,}</li> <li>?</li> <li>+</li> <li>*</li></ul> <p>{m} 就不是贪婪匹配，因为该量词明确表示出现 m 次。</p> <h4 id="例子分析"><a href="#例子分析" class="header-anchor">#</a> 例子分析</h4> <p>🍬全局匹配</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{2,5}/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;12 123 1234 12345 123456&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;12&quot;, &quot;123&quot;, &quot;1234&quot;, &quot;12345&quot;, &quot;12345&quot;]</span>
</code></pre></div><p>🍬非全局匹配</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{2,5}/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;12 123 1234 12345 123456&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;12&quot;, &quot;123&quot;, &quot;1234&quot;, &quot;12345&quot;, &quot;12345&quot;]</span>
</code></pre></div><p>以上两个例子的疑惑与解答：</p> <ol><li>例一中为什么匹配不到<code>23</code>、<code>234</code>、<code>456</code>这样的字符串</li></ol> <p>有这个疑惑是因为对贪婪匹配和全局匹配的理解不够透彻。</p> <p>分析：第一个例子的结果是贪婪匹配和全局匹配共同作用下的结果。</p> <ul><li>全局匹配的规则：匹配到第一个后，继续向下匹配，注意全局匹配是有顺序的。</li> <li>在匹配每一个结果是，匹配出现次数最多的字符串。</li></ul> <p><code>\d{2,5}</code> 表示匹配出现2次到5次之间数字字符串，过程如下(下图是我个人理解，不一定准确。)：</p> <p><img src="/blog/assets/img/regexp_1_01.817bdb9e.png" alt="regexp_1_01"></p> <p>当执行到第二步时，因为第3个字符为空字符串，所以符合<code>\d{2,5}</code> 的字符串是 <code>12</code>;<br>
因为是全局匹配，所以继续匹配下一个符合条件的字符串;<br>
当执行到第三步时，因为第7个字符为空字符串，所以符合<code>\d{2,5}</code> 的字符串有 <code>12</code> 或者 <code>123</code>，但是因为这里是贪婪匹配，所以最后匹配的是 <code>123</code>。</p> <p>解答：通过上述分析，可以知道，在贪婪匹配情况，只会尽可能匹配出现次数多的，而不会匹配出现次数少的；
另外因为全局匹配是按顺序的，一个字符是不能重复匹配的。</p> <p>🍬 这个就可以匹配到 <code>456</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{3}/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;12 123 1234 12345 123456&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt;  [&quot;123&quot;, &quot;123&quot;, &quot;123&quot;, &quot;123&quot;, &quot;456&quot;]</span>
</code></pre></div><h2 id="_1-5-惰性匹配"><a href="#_1-5-惰性匹配" class="header-anchor">#</a> 1-5.惰性匹配</h2> <blockquote><p>针对部分量词，可以理解成尽可能匹配符合规则的出现次数最少字符</p></blockquote> <p>在量词后面加个<code>?</code>实现惰性匹配。例如:<code>{m,n}?</code></p> <p>🍬惰性匹配</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{2,5}?/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;12 123 1234 12345 123456&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt;  [&quot;12&quot;, &quot;12&quot;, &quot;12&quot;, &quot;34&quot;, &quot;12&quot;, &quot;34&quot;, &quot;12&quot;, &quot;34&quot;, &quot;56&quot;]</span>
</code></pre></div><p>分析：虽然规则<code>\d{2,5}</code>可以匹配出现5次的字符，但是在惰性匹配作用下，只会匹配出现次数最少的，即出现2次的字符。<br>
这里因为全局匹配的作用，以<code>1234</code> 为例，当第一个<code>12</code>匹配完成，剩下的<code>34</code>还存在符合规则的结果，所以会继续匹配，<code>123456</code>也是同样的道理。</p> <h2 id="_1-6-多选分支"><a href="#_1-6-多选分支" class="header-anchor">#</a> 1-6.多选分支</h2> <p>用<code>|</code>(管道符)分隔子模式，例如：<code>(r1|r2|r3)</code>, 表示结果是符合其中规则之一。</p> <p>多选分支是惰性匹配，即如果字符串符合<code>r1</code>和<code>r2</code>的规则，结果将是前面的规则 r1</p> <p>🍬 短的在前</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/good|goodbye/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;goodbye&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;good&quot;]</span>
</code></pre></div><p>🍬 长的在前</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/goodbye|good/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;goodbye&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;goodbye&quot;]</span>
</code></pre></div><p>从这里可以看出，<code>惰性匹配</code>应该是更为抽象的定义：<strong>当有多个规则时，匹配最前面的规则</strong></p> <p><code>\d{2,5}</code> 可以用多选分支表示成 <code>\d{2}|\d{3}|\d{4}|\d{5}</code></p> <h4 id="例子分析-2"><a href="#例子分析-2" class="header-anchor">#</a> 例子分析</h4> <p>🍬 用多选分支表示 {m,n}</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{2}|\d{3}|\d{4}|\d{5}/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;12 123 1234 12345 123456&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt;   [&quot;12&quot;, &quot;12&quot;, &quot;12&quot;, &quot;34&quot;, &quot;12&quot;, &quot;34&quot;, &quot;12&quot;, &quot;34&quot;, &quot;56&quot;]</span>
</code></pre></div><p>分析：因为每个连续的数字字符串中，都有符合<code>\d{2}</code>的字符串，所以不会再匹配<code>\d{3}</code>、<code>\d{4}</code>、<code>\d{5}</code></p> <p>🍬改变顺序，把 5 放到最前面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{5}|\d{3}|\d{4}|\d{2}/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;12 123 1234 12345 123456&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt;    [&quot;12&quot;, &quot;123&quot;, &quot;123&quot;, &quot;12345&quot;, &quot;12345&quot;]</span>
</code></pre></div><p>分析：匹配顺序是<code>\d{5}</code>、<code>\d{3}</code>、<code>\d{4}</code>、<code>\d{2}</code>，所以对于连续的数字字符串，只要前面的规则满足，就不会再匹配剩下的规则。</p> <ul><li>以<code>12345</code> 为例，符合<code>\d{5}</code>，所以不再匹配<code>\d{3}</code>、<code>\d{4}</code>、<code>\d{2}</code></li> <li>以<code>1234</code> 为例，不符合<code>\d{5}</code>, 符合<code>\d{3}</code>，所以不再匹配<code>\d{4}</code>、<code>\d{2}</code></li> <li>以<code>123</code> 为例，不符合<code>\d{5}</code>, 符合<code>\d{3}</code>，所以不再匹配<code>\d{4}</code>、<code>\d{2}</code></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/RegExp/" class="prev router-link-active">
        学习笔记
      </a></span> <span class="next"><a href="/blog/RegExp/first_practise.html">
        第一章练习册
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.eda0559f.js" defer></script><script src="/blog/assets/js/2.7cc74fb0.js" defer></script><script src="/blog/assets/js/5.b91030ac.js" defer></script>
  </body>
</html>
